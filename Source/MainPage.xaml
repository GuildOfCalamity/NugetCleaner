<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="NugetCleaner.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:NugetCleaner"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:support="using:NugetCleaner.Support"
    mc:Ignorable="d">
    <Grid
        x:Name="hostGrid"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Image
            Grid.RowSpan="3"
            Grid.ColumnSpan="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Opacity="0.08"
            Source="/Assets/AppIcon.png" />

        <!--#region [Settings]-->
        <local:GroupBox
            Grid.Row="0"
            Grid.Column="0"
            MinWidth="480"
            Margin="20,20,10,1"
            HorizontalAlignment="Left"
            HorizontalContentAlignment="Left"
            BorderBrush="{ThemeResource SecondaryBorderBrush}"
            FontSize="{StaticResource FontSizeMedium}">
            <local:GroupBox.Heading>
                <StackPanel Orientation="Horizontal">
                    <SymbolIcon
                        Margin="0,0,5,0"
                        VerticalAlignment="Bottom"
                        Foreground="{ThemeResource SecondaryBorderBrush}"
                        Symbol="Setting" />
                    <!--  https://learn.microsoft.com/en-us/windows/windows-app-sdk/api/winrt/microsoft.ui.xaml.controls.symbol?view=windows-app-sdk-1.5#fields  -->
                    <TextBlock Text="Scanning Options" />
                </StackPanel>
            </local:GroupBox.Heading>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0" Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <CheckBox
                        x:Name="cbReport"
                        Grid.Row="0"
                        Margin="10,3,2,2"
                        HorizontalAlignment="Left"
                        Checked="ReportOnChecked"
                        Content="Report Only (no deletions)"
                        IsChecked="True"
                        Unchecked="ReportOnUnchecked" />
                    <StackPanel Grid.Row="1" Orientation="Horizontal">
                        <TextBlock
                            Margin="2,4,2,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            FontSize="13"
                            Foreground="Gray"
                            Text="Days:" />
                        <Slider
                            x:Name="sldrDays"
                            MinWidth="120"
                            Margin="10,6,10,2"
                            HorizontalAlignment="Left"
                            Maximum="365"
                            Minimum="1"
                            ValueChanged="SliderDaysChanged"
                            Value="180" />
                    </StackPanel>
                    <StackPanel Grid.Row="2" Orientation="Horizontal">
                        <TextBlock
                            Margin="2,1,2,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            FontSize="13"
                            Foreground="Gray"
                            Text="Path:" />
                        <TextBox
                            x:Name="tbNugetPath"
                            MinWidth="300"
                            Margin="10,2,10,2"
                            HorizontalAlignment="Left" />
                    </StackPanel>
                </Grid>
            </Grid>

        </local:GroupBox>
        <!--#endregion-->

        <StackPanel
            Grid.Row="0"
            Grid.Column="1"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Orientation="Vertical">
            <Button
                x:Name="btnRun"
                MinWidth="180"
                MinHeight="60"
                Margin="20"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Click="RunButtonOnClick"
                Content="Scan Packages"
                FontSize="{StaticResource FontSizeLarge}"
                Style="{StaticResource EnhancedButton}" />
            <!--#region [Animation]-->
            <Grid
                x:Name="animGrid"
                Width="200"
                Height="60"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <local:AnimatedCirclesControl
                    x:Name="circles"
                    AnimationDuration="0.7"
                    AnimationFrequency="0.1"
                    CircleSize="16"
                    GradientColorOne="{StaticResource ACC2}"
                    GradientColorTwo="{StaticResource ACC1}"
                    IsRunning="False"
                    ScaleFactor="1.4"
                    UseRadialGradient="False" />
            </Grid>
            <!--#endregion-->
        </StackPanel>

        <StackPanel
            Grid.Row="1"
            Grid.ColumnSpan="2"
            Margin="23,9,5,5"
            HorizontalAlignment="Stretch"
            Orientation="Horizontal">
            <TextBlock
                x:Name="tbMessages"
                VerticalAlignment="Center"
                FontSize="{StaticResource FontSizeMedium}"
                Foreground="Gray"
                Text="" />
        </StackPanel>

        <!--#region [Message List]-->
        <Grid
            x:Name="LogViewGrid"
            Grid.Row="2"
            Grid.ColumnSpan="2"
            Padding="8"
            Background="Transparent"
            RowDefinitions="Auto,*">
            <!--  Log Viewer Resources  -->
            <Grid.Resources>
                <GridLength x:Key="TimestampColumnWidth">170</GridLength>
                <GridLength x:Key="LevelColumnWidth">80</GridLength>
                <!--  Styles  -->
                <Style x:Key="ColumnHeaderBorderStyle" TargetType="Border">
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Padding" Value="0,0,10,0" />
                    <Setter Property="BorderThickness" Value="0,0,0,1" />
                    <Setter Property="BorderBrush" Value="{StaticResource HeaderBrush}" />
                    <Setter Property="Margin" Value="2,1" />
                </Style>
                <Style x:Key="ColumnHeaderTextBlockStyle" TargetType="TextBlock">
                    <Setter Property="FontWeight" Value="Bold" />
                    <Setter Property="FontFamily" Value="Segoe" />
                    <Setter Property="FontSize" Value="15" />
                </Style>
                <Style x:Key="LogElementTextBlockStyle" TargetType="TextBlock">
                    <Setter Property="Padding" Value="0,0,10,0" />
                    <Setter Property="FontSize" Value="13" />
                    <Setter Property="FontFamily" Value="Consolas" />
                    <Setter Property="Margin" Value="2,1" />
                    <Setter Property="HorizontalAlignment" Value="Left" />
                </Style>
            </Grid.Resources>
            <!--  Column Headers  -->
            <Grid Grid.Row="0">
                <Grid.Resources>
                    <Style BasedOn="{StaticResource ColumnHeaderBorderStyle}" TargetType="Border" />
                    <Style BasedOn="{StaticResource ColumnHeaderTextBlockStyle}" TargetType="TextBlock" />
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="{StaticResource TimestampColumnWidth}" />
                    <ColumnDefinition Width="{StaticResource LevelColumnWidth}" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!--  Number Column Header  -->
                <Border Grid.Column="0">
                    <TextBlock Foreground="{ThemeResource HeaderBrush}" Text="Date" />
                </Border>
                <Border Grid.Column="1">
                    <TextBlock Foreground="{ThemeResource HeaderBrush}" Text="Size" />
                </Border>
                <Border Grid.Column="2">
                    <TextBlock Foreground="{ThemeResource HeaderBrush}" Text="Location" />
                </Border>
            </Grid>
            <!--  Log Data  -->
            <ScrollViewer x:Name="LogScrollViewer" Grid.Row="1">
                <ItemsRepeater x:Name="LogItemsRepeater" ItemsSource="{x:Bind LogMessages}">
                    <ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="support:TargetItem">
                            <Grid>
                                <Grid.ChildrenTransitions>
                                    <TransitionCollection>
                                        <AddDeleteThemeTransition />
                                    </TransitionCollection>
                                </Grid.ChildrenTransitions>
                                <Grid.Resources>
                                    <Style BasedOn="{StaticResource LogElementTextBlockStyle}" TargetType="TextBlock" />
                                </Grid.Resources>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="{StaticResource TimestampColumnWidth}" />
                                    <ColumnDefinition Width="{StaticResource LevelColumnWidth}" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <!--  Time Element  -->
                                <TextBlock
                                    Grid.Column="0"
                                    Foreground="{ThemeResource PrimaryBrush}"
                                    Text="{x:Bind LastAccess, Converter={StaticResource StringToFormat}, ConverterParameter='{}{0:hh:mm:ss.fff tt (ddd)}'}" />
                                <!--  Size Element  -->
                                <TextBlock
                                    Grid.Column="1"
                                    Foreground="{ThemeResource PrimaryBrush}"
                                    Text="{x:Bind Size, Converter={StaticResource BytesToFileSize}}" />
                                <!--  Location Element  -->
                                <TextBlock
                                    Grid.Column="2"
                                    Foreground="{ThemeResource PrimaryBrush}"
                                    Text="{x:Bind Location, Converter={StaticResource TruncateText}, ConverterParameter='100'}" />
                            </Grid>
                        </DataTemplate>
                    </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
            </ScrollViewer>
        </Grid>
        <!--#endregion-->

        <!--#region [InfoBar Content]-->
        <StackPanel
            Grid.Row="2"
            Grid.ColumnSpan="2"
            Margin="0"
            VerticalAlignment="Bottom">
            <!--  Wrap this in a StackPanel/Grid to support AnimateUIElementOffset  -->
            <local:AutoCloseInfoBar
                x:Name="infoBar"
                AnimationSeconds="2.0"
                AutoCloseInterval="6000"
                Background="{StaticResource GradientBarBrush}"
                Severity="Informational"
                SlideUp="True" />
        </StackPanel>
        <!--#endregion-->

    </Grid>

</Page>
